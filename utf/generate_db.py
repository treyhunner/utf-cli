# Inspired by https://github.com/sethmlarson/utf8.xyz/blob/main/build-db.py
from dataclasses import dataclass
import importlib.resources
import json
import sqlite3
import csv

import platformdirs


db_path = platformdirs.user_cache_path("utf", "treyhunner") / "utf8.db"


@dataclass(slots=True, frozen=True)
class Character:
    glyph: str
    name: str
    category: str

    @classmethod
    def from_csv_row(cls, row):
        ordinal, name, group = row[:3]
        ordinal = int(ordinal, 16)
        name = name.lower()
        if group == "Sc":
            category = "currency"
        elif "arrow" in name:
            category = "arrows"
        else:
            category = None
        return cls(chr(ordinal), name, category)

    @property
    def is_control(self):
        """Return True for control characters."""
        return "<" in self.name


def get_character_data():
    # File from https://www.unicode.org/Public/draft/UCD/ucd/UnicodeData.txt
    path = importlib.resources.path("utf", "UnicodeData.txt")
    with open(path) as file:
        characters = [
            Character.from_csv_row(row)
            for row in csv.reader(file, delimiter=";")
        ]
        return {
            character.glyph: character
            for character in characters
        }


def get_keywords_data():
    # File from https://github.com/muan/emojilib/blob/main/dist/emoji-en-US.json
    path = importlib.resources.path("utf", "emoji-en-US.json")
    keyword_data = json.loads(path.read_text())
    return [
        (keyword.replace("_", " "), glyph)
        for glyph, keywords in keyword_data.items()
        for keyword in keywords
    ]


def make_database():
    db_path.parent.mkdir(parents=True, exist_ok=True)
    db = sqlite3.connect(db_path)
    db.execute(
        """
        CREATE TABLE symbols (
            glyph TEXT PRIMARY KEY,
            name TEXT,
            category TEXT DEFAULT '',
            priority INTEGER
        );
        """
    )
    db.execute(
        """
        CREATE TABLE copied (
            glyph TEXT PRIMARY KEY,
            copies INTEGER,
            last_copied DATETIME
        );
        """
    )
    db.execute(
        """
        CREATE TABLE keywords (
            keyword TEXT,
            glyph TEXT
        );
        """
    )
    db.execute("CREATE INDEX keyword_index ON keywords (keyword COLLATE NOCASE);")
    characters = get_character_data()
    keywords = get_keywords_data()
    for name, glyph in keywords:
        characters.setdefault(glyph, Character(glyph, name, "emoji"))
    # Turn keywords into a set to deduplicate
    keywords = set(keywords) | {
        (character.name, character.glyph)
        for character in characters.values()
        if not character.is_control
    }
    common = common_characters()
    populate_chars_table(db, characters.values(), common)
    populate_keywords_table(db, keywords)
    populate_copied_table(db)
    db.commit()
    db.close()


def populate_chars_table(db, characters, common):
    for char in characters:
        if char.is_control:
            continue
        db.execute(
            """
            INSERT INTO symbols (
                name, glyph, category, priority
            ) VALUES (
                ?, ?, ?, ?
            )
            """,
            (
                char.name,
                char.glyph,
                char.category,
                common.get(char.glyph, 0),
            )
        )


def populate_keywords_table(db, keywords):
    for keyword, glyph in keywords:
        db.execute(
            """
            INSERT INTO keywords (
                keyword, glyph
            ) VALUES (
                ?, ?
            )
            """,
            (keyword, glyph)
        )


def populate_copied_table(db):
    fake_copies = [
        "\N{face with tears of joy}",
        "\N{bullet}",
        "\N{sparkles}",
        "\N{superscript two}",
        "\N{thumbs up sign}",
        "\N{em dash}",
        "\N{purple heart}",
        "\N{horizontal ellipsis}",
        "\N{smiling face with smiling eyes}",
        "\N{vulgar fraction one half}",
        "\N{party popper}",
        "\N{zero width space}",
        "\N{grinning face}",
        "\N{interrobang}",
        "\N{unicorn face}",
        "\N{rightwards arrow}",
        "\N{mushroom}",
        "\N{place of interest sign}",
        "\N{sunflower}",
        "\N{not equal to}",
        "\N{shocked face with exploding head}",
        "\N{inverted question mark}",
        "\N{person raising both hands in celebration}",
        "\N{degree sign}",
        "\N{rainbow}",
    ]
    for n, glyph in enumerate(fake_copies, start=1):
        db.execute(
            """
            INSERT INTO copied (
                glyph, copies, last_copied
            ) VALUES (
                ?, ?, datetime('now', '-{n} hour')
            )
            """,
            (glyph, 0)
        )



def common_characters():
    common_emoji = "ðŸ˜‚ðŸ¤£ðŸ‘ðŸ˜­ðŸ™ðŸ˜˜ðŸ¥°ðŸ˜ðŸ˜ŠðŸŽ‰ðŸ˜ðŸ’•ðŸ¥ºðŸ˜…ðŸ”¥ðŸ¤¦ðŸ¤·ðŸ™„ðŸ˜†ðŸ¤—ðŸ˜‰ðŸŽ‚ðŸ¤”ðŸ‘ðŸ™‚ðŸ˜³ðŸ¥³ðŸ˜ŽðŸ‘ŒðŸ’œðŸ˜”ðŸ’ªâœ¨ðŸ’–ðŸ‘€ðŸ˜‹ðŸ˜ðŸ˜¢ðŸ‘‰ðŸ’—ðŸ˜©ðŸ’¯ðŸŒ¹ðŸ’žðŸŽˆðŸ’™ðŸ˜ƒðŸ˜¡ðŸ’ðŸ˜œðŸ™ˆðŸ¤žðŸ˜„ðŸ¤¤ðŸ™ŒðŸ¤ªðŸ˜€ðŸ’‹ðŸ’€ðŸ‘‡ðŸ’”ðŸ˜ŒðŸ’“ðŸ¤©ðŸ™ƒðŸ˜¬ðŸ˜±ðŸ˜´ðŸ¤­ðŸ˜ðŸŒžðŸ˜’ðŸ˜‡ðŸŒ¸ðŸ˜ˆðŸŽ¶ðŸŽŠðŸ¥µðŸ˜žðŸ’šðŸ–¤ðŸ’°ðŸ˜šðŸ‘‘ðŸŽðŸ’¥ðŸ™‹ðŸ˜‘ðŸ¥´ðŸ‘ˆðŸ’©âœ…ðŸ‘‹ðŸ¤®ðŸ˜¤ðŸ¤¢ðŸŒŸâ—ðŸ˜¥ðŸŒˆðŸ’›ðŸ˜ ðŸ˜«ðŸ˜²ðŸ–•ðŸ”´ðŸŒ»ðŸ¤¯ðŸ’ƒðŸ‘ŠðŸ¤¬ðŸƒðŸ˜•âš¡â˜•ðŸ€ðŸ’¦â­ðŸ¦‹ðŸ¤¨ðŸŒºðŸ˜¹ðŸ¤˜ðŸŒ·ðŸ’ðŸ’¤ðŸ¤ðŸ°ðŸ˜“ðŸ’˜ðŸ»ðŸ˜ŸðŸ˜£ðŸ§ðŸ˜ ðŸ¤ ðŸ˜»ðŸŒ™ðŸ˜›ðŸ¤™ðŸ™ŠðŸ§¡ðŸ¤¡ðŸ¤«ðŸŒ¼ðŸ¥‚ðŸ˜·ðŸ¤“ðŸ¥¶ðŸ˜¶ðŸ˜–ðŸŽµðŸš¶ðŸ˜™ðŸ†ðŸ¤‘ðŸ’…ðŸ˜—ðŸ¶ðŸ“âœ‹ðŸ‘…ðŸ‘„ðŸŒ¿ðŸš¨ðŸ“£ðŸ¤ŸðŸ‘ðŸƒðŸ˜®ðŸ’ŽðŸ“¢ðŸŒ±ðŸ™ðŸ·ðŸ˜ªðŸŒšðŸ†ðŸ’ðŸ’‰âŒðŸ’¢ðŸ›’ðŸ˜¸ðŸ¾ðŸ‘ŽðŸš€ðŸŽ¯ðŸºðŸ“ŒðŸ“·ðŸ™‡ðŸ’¨ðŸ•ðŸ ðŸ“¸ðŸ‡ðŸš©ðŸ˜°ðŸ‘¶ðŸŒŠðŸ•ðŸ’«ðŸ˜µðŸŽ¤ðŸ¡ðŸ¥€ðŸ¤§ðŸ¾ðŸ°ðŸðŸ¤²ðŸ‘†ðŸ˜¯âœŠðŸ’ŒðŸ’¸ðŸ§âš½â“ðŸ•ºðŸ˜ºðŸ’§ðŸ’£ðŸ¤ðŸŽðŸ·ðŸ¥ðŸ’ðŸ“ðŸŽ€ðŸ™…ðŸ¥‡ðŸŒðŸ”«ðŸ±ðŸ£ðŸŽ§ðŸ’ŸðŸ‘¹ðŸ’ðŸ¼ðŸ’¡ðŸ˜½ðŸŠðŸ˜¨ðŸ«ðŸ§¢ðŸ¤•ðŸš«ðŸŽ¼ðŸ»ðŸ“²ðŸ‘»ðŸ‘¿ðŸ§šðŸŒ®ðŸ­ðŸŸðŸ¸ðŸðŸˆðŸ”µðŸ”ªðŸ˜§ðŸŒ„ðŸ˜¾ðŸ¤¸ðŸ“±ðŸ‡ðŸŒ´ðŸ¢ðŸŒƒðŸ‘½ðŸŒðŸ“ºðŸ‘â°ðŸ””ðŸŒ…ðŸ¦„â­•ðŸŽ¥ðŸ‹ðŸ¥šðŸ’²ðŸ“šðŸ”ðŸŽ¸ðŸ¥ƒðŸ˜¿ðŸš—ðŸŒŽðŸ”ŠðŸ¦…ðŸš¿ðŸ¦†ðŸ‰ðŸ¬ðŸ§¸ðŸ¨ðŸ“ðŸ¤šðŸ“©ðŸ’µðŸ‘¼ðŸ’­ðŸŒâš«ðŸ‘§ðŸ¤œðŸ¿ðŸ§¿ðŸ€ðŸðŸŒ³ðŸ™‰ðŸ˜¦âš¾ðŸ¤°ðŸ¹ðŸ¦ðŸ›‘ðŸ§˜ðŸ”ðŸ‚ðŸ’ðŸªðŸ™€ðŸ—ðŸŒ ðŸŽ¬ðŸŒµðŸ„ðŸðŸ©ðŸ¦ðŸ™†ðŸ“žðŸ‘¸ðŸ…ðŸðŸ‘¦ðŸ’¬ðŸ¥¤ðŸ˜¼ðŸŒ¾ðŸ§€ðŸŽ®ðŸ§ â˜”ðŸŒðŸ›ŒðŸ”ðŸŒ‰ðŸ¤›ðŸ¤’ðŸ‘—âšªðŸŒ²ðŸœðŸ¦ðŸ¯ðŸ‘®ðŸ…ðŸ¼ðŸ’„ðŸ‘ºðŸ”žðŸŽ†ðŸŽ¨ðŸžðŸŽ‡ðŸ¦œðŸ‘ðŸ™ðŸ¦ðŸ”—ðŸ“–ðŸ”¹ðŸ¥“ðŸ¥’ðŸ¸ðŸ¥§ðŸ’»ðŸ–ðŸ“ˆðŸ’ŠðŸ‘©ðŸŒ€ðŸ’†ðŸ¥©ðŸŽ„ðŸŒ½ðŸ¤¥ðŸŽðŸ†˜ðŸ’ðŸ¥•ðŸ”®ðŸ¦€ðŸ ðŸŒ›ðŸ‘ ðŸ“ðŸ¥ŠðŸ›ðŸš¬ðŸ”°ðŸŒœðŸ´ðŸ¥”ðŸŽ“ðŸ‘™ðŸ—¿ðŸ¥‘ðŸ‘¯ðŸâ›½ðŸðŸ‘‚ðŸ¦ŠðŸ‘ƒðŸ¦–ðŸ´ðŸŽƒðŸ¦ ðŸŒ•ðŸ“¦ðŸŒŒâ›³ðŸ§ðŸŸðŸŽ¹ðŸ¥žðŸ‘£ðŸ¥œðŸ¡ðŸ¦·ðŸš´ðŸðŸŽ»ðŸŠðŸ–ðŸºðŸ½ðŸš®ðŸµðŸŒ­ðŸ„ðŸ¥ðŸ³ðŸ‘«âŒšðŸ”†ðŸ³ðŸŒ¯ðŸ¦´ðŸ¥ªðŸ¦ƒðŸŽ£ðŸ”»ðŸ€ðŸ¬ðŸšðŸ¤–ðŸ§ðŸ¦ˆðŸ„ðŸˆðŸ§¬ðŸŒðŸ”ðŸ“´ðŸ¥¦ðŸ¯ðŸ“®ðŸ¥›ðŸ¥­ðŸ––ðŸ›ðŸ¦žðŸ¤ðŸ§ŸðŸ¤ðŸ¦ðŸŽ­ðŸžðŸµðŸ£ðŸ¥—ðŸ†”ðŸ”‘ðŸ‘´ðŸ¤´ðŸ‘µðŸ¤³ðŸ§¨â¬›ðŸ‘¤ðŸŽ©ðŸ”™ðŸ¥«ðŸ†•ðŸ¥ðŸ‘°ðŸ’³ðŸšðŸŒ†âš“ðŸ†—ðŸ¤±ðŸ‘­ðŸ¦‡ðŸ‘¨ðŸ¦—ðŸ¦•ðŸ¹ðŸ®ðŸš²ðŸ’‘ðŸš’ðŸ¦ŽðŸ¦‰ðŸ‚ðŸˆðŸš­ðŸ˜ðŸš™ðŸ”¨â©ðŸ“„ðŸ¥ŽðŸ”’ðŸŽ±ðŸ¦µðŸŠðŸ›µðŸ”ŽðŸ‘ŸðŸ†’ðŸ”±ðŸ¦ŒðŸ¥ˆðŸššâ™ˆðŸœðŸŽ²ðŸ’ ðŸ¥ðŸ¦¶ðŸ‘¾ðŸ’®ðŸ¦‘ðŸ”ºðŸðŸŒðŸ”·ðŸ‘–ðŸ’’ðŸ‰ðŸŽðŸ‘•ðŸš½ðŸ¥ðŸðŸ«ðŸš‚ðŸ”â›„â³â›…ðŸ”œðŸ¥£ðŸŽ‹ðŸ”¶ðŸ”¸â›”ðŸ¦¸ðŸ“»ðŸ‘“ðŸ¥‰ðŸ…ðŸ“ŠðŸ¦ðŸšªðŸš˜ðŸ‘±ðŸ§œðŸ¥â›µðŸ•‹ðŸ“°ðŸ’‡ðŸ¥¬ðŸ¨ðŸ§¹ðŸ‘¥â¬œðŸ“†ðŸ¥–ðŸ©ðŸ¤ºðŸ›âŒ›ðŸ”½ðŸ²ðŸ¦˜ðŸ¥¥ðŸ›€ðŸ“…ðŸ“¿ðŸ•›ðŸŒ‘ðŸš›ðŸ§ºðŸ“¡ðŸ­ðŸ—½ðŸ†“ðŸŽ¾ðŸðŸŽ’ðŸ†šðŸŒ‹ðŸ“‰ðŸ’ðŸ•ðŸ¦™ðŸ§™ðŸ¦ŸðŸƒðŸš¢ðŸ™ðŸ“•ðŸ‘¬ðŸ†ðŸ”›â•ðŸ‘’ðŸªðŸ¥ŸðŸ§¼ðŸ¶ðŸŽªðŸ‘”ðŸ“ŽðŸ¦šðŸ ðŸ¥¨ðŸ®ðŸ©ðŸƒðŸ”…ðŸ°ðŸ“¬âž•ðŸ“›ðŸðŸŽºðŸ•ŒðŸ‹ðŸ¥‹ðŸ²âŽðŸŽ«ðŸ“¨â›ªðŸ¦’ðŸŽ¡ðŸ§±ðŸŽ·ðŸš‘ðŸš“ðŸšƒðŸ‡ðŸŒ‡ðŸ™ŽðŸšŒðŸ’¶ðŸšœðŸŒ°ðŸ›ðŸ’´ðŸ‘›ðŸ§“ðŸ¥¾ðŸ«ðŸ¥¢ðŸ§¤ðŸš”ðŸŽ°ðŸ§”ðŸ¥¯âž–ðŸ¹ðŸ¦‚ðŸ”˜ðŸ”„ðŸ“¥ðŸ“¹ðŸ›«ðŸ“ðŸŽ ðŸ†™ðŸ’ˆðŸ”–ðŸ±ðŸ•œðŸ¢ðŸ¢ðŸ”ŒðŸ¦”ðŸ›¸ðŸ¤µðŸ‘žðŸ”‹â—¾ðŸ‘œðŸš§â™‹ðŸ®ðŸ¡ðŸ‘˜ðŸ›¹â™‰ðŸš¦ðŸ§©ðŸšºðŸ¥„ðŸ§›ðŸ—»â™ðŸ¦¹ðŸ¨ðŸ‰ðŸ¦›ðŸ’¼ðŸ›´ðŸ“˜ðŸ§¦ðŸ¥˜ðŸ¤¹â™ŠðŸšðŸ”“ðŸ´ðŸ’¿ðŸ¦“ðŸ“œðŸ‘·ðŸš£ðŸ§–ðŸ‘³ðŸŽŽðŸš¹â›ºðŸŽ…ðŸ§‚ðŸšðŸðŸ“€ðŸŽðŸ¦¢ðŸŒ”ðŸ—¼ðŸŒ’ðŸ§žðŸ•’ðŸŽ³ðŸŽ¢ðŸ”Ÿâ¬ðŸ§µðŸšµðŸ§’â™ŒðŸ§ªðŸš•ðŸ§½â›²ðŸ¦ðŸ‘šðŸ“‹â™’ðŸŒ˜ðŸ—ðŸ“ ðŸ¤¼â™ðŸ§³ðŸ§¶ðŸ“§ðŸ‚ðŸ‘¢ðŸ¥…ðŸ™â™ŽðŸ”¯ðŸ¤¾â™ðŸ“¯ðŸŒ“ðŸ§»ðŸ”ðŸŽ½ðŸ§£ðŸ§—ðŸŽ´â™“ðŸ“—ðŸ‘ªâ”ðŸ”šðŸ“™ðŸ§•ðŸ“ðŸ§²ðŸ’¹ðŸ’·â—½ðŸ“ƒðŸ§ðŸ¥™âž°ðŸŒ–ðŸŒ—ðŸŒ‚ðŸ”‰ðŸŽŒðŸ“¤ðŸ€„ðŸ”­ðŸš°ðŸ§‘ðŸ“’ðŸ§§ðŸ¦â™¿ðŸŽ¿ðŸ˜ðŸ¯ðŸ”²ðŸ•‘ðŸ¥¡ðŸ’ºðŸ”ˆâ™‘ðŸ§´ðŸ¥®ðŸ”§ðŸ›¬ðŸŽ‘ðŸš¤ðŸ“ðŸ““ðŸŽâªðŸªðŸ§ðŸš†ðŸ’‚ðŸ§¥ðŸ›¶ðŸ”•ðŸ“¼ðŸ”‡ðŸ¸ðŸ’½ðŸ¦¡ðŸŒðŸ“”ðŸš„ðŸ“¶ðŸš¼ðŸ”¦ðŸš…ðŸ‰‘ðŸ§¾ðŸ§­ðŸ•“ðŸš–ðŸ¥½ðŸ“‘ðŸ•™ðŸ¤½ðŸ”¬ðŸš¸ðŸŽ¦ðŸ—¾ðŸ”¼ðŸ•˜ðŸ‘¡ðŸ“ðŸšðŸ¥ ðŸš¥ðŸ¬ðŸ¥ðŸˆµðŸ•ðŸ”¢ðŸ§«ðŸ†–ðŸ§®ðŸ¥¼âž¿ðŸ¤¶ðŸ••ðŸ‘ðŸ”ƒðŸ“µðŸˆ¶ðŸ¥ðŸ“³ðŸ†‘ðŸ“«ðŸ•–ðŸš‹ðŸ”©ðŸ•—ðŸ“‚ðŸš‡ðŸ¥ŒðŸ§°ðŸ•šðŸšðŸ§¯ðŸ”ðŸ§·ðŸš·ðŸšŽðŸš‰ðŸ†ŽðŸ‘²ðŸ•”ðŸ’¾âž—ðŸºðŸ•ŽðŸ’±ðŸš³ðŸš»ðŸ“ŸðŸ‰ðŸˆ¹ðŸ¥¿ðŸ•¥â«ðŸ”³ðŸ•žðŸ”‚ðŸš ðŸ£ðŸ‘ðŸšŠðŸ­â›ŽðŸšˆðŸ”€ðŸš¾ðŸšðŸ•ðŸˆ´ðŸšŸðŸˆ¯ðŸš¯ðŸ”¤ðŸ›‚ðŸ“ªðŸš¡ðŸ¤ðŸšžðŸˆºðŸ“­ðŸ•¡ðŸ›„ðŸ•¦ðŸš±ðŸ•£ðŸˆšðŸˆ²ðŸ” ðŸ›·ðŸ“‡ðŸ•¤ðŸ•§ðŸˆ¸ðŸˆ³ðŸ•¢ðŸ• ðŸ•ŸðŸ›ƒðŸ›…ðŸ”¡ðŸ”£ðŸ¦°ðŸˆðŸ¦±ðŸ¦²ðŸ¦³"
    common_characters = "â€¢\N{zero width space}â¡Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â®Â¯Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃŽÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÃÃžÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿ÅÅ‚ÅƒÅ„Å…Å†Å‡ÅˆÅŠÅ‹ÅŒÅÅŽÅÅÅ‘Å’Å“Å”Å•Å–Å—Å˜Å™ÅšÅ›ÅœÅÅžÅŸÅ Å¡Å¢Å£Å¤Å¥Å¦Å§Å¨Å©ÅªÅ«Å¬Å­Å®Å¯Å°Å±Å´ÅµÅ¶Å·Å¸Å¹ÅºÅ»Å¼Å½Å¾Å¿Æ†ÆŽÆœÉÉ‘É’É”É˜É™É›ÉœÉžÉŸÉ¡É¢É£É¤É¥É¨ÉªÉ¬É®É¯É°É´ÉµÉ¶É·É¸É¹ÊÊ‡ÊŒÊÊŽÊžÎ‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎžÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏ‚ÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰ÐÐ‘Ð’Ð“Ð”Ð•Ð–Ð—Ð˜Ð™ÐšÐ›ÐœÐÐžÐŸÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯Ð°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑŽÑá´€á´á´‚á´ƒá´„á´…á´†á´‡á´ˆá´‰á´Šá´‹á´Œá´á´Žá´á´á´‘á´’á´“á´”á´•á´–á´—á´˜á´™á´šá´›á´œá´á´žá´Ÿá´ á´¡á´¢á´£á´¤á´¥á´¦á´§á´¨á´©á´ªáºžá»²á»³á»´á»µá»¸á»¹â€â€‘â€’â€“â€”â€•â€–â€—â€˜â€™â€šâ€›â€œâ€â€žâ€Ÿâ€ â€¡â€£â€¤â€¥â€¦â€§â€°â€±â€²â€³â€´â€µâ€¶â€·â€¸â€¹â€ºâ€»â€¼â€½â€¾â€¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒââŽâââ‘â’â“â”â•â—â°â±â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰â‚Šâ‚‹â‚Œâ‚â‚Žâ‚ â‚¡â‚¢â‚£â‚¤â‚¥â‚¦â‚§â‚¨â‚©â‚ªâ‚«â‚¬â‚­â‚®â‚¯â‚°â‚±â‚²â‚³â‚´â‚µâ‚¶â‚·â‚¸â‚¹â„€â„â„‚â„ƒâ„„â„…â„†â„‡â„ˆâ„‰â„Šâ„‹â„Œâ„â„Žâ„â„â„‘â„’â„“â„”â„•â„–â„—â„˜â„™â„šâ„›â„œâ„â„žâ„Ÿâ„ â„¡â„¢â„£â„¤â„¥â„¦â„§â„¨â„©â„ªâ„«â„¬â„­â„®â„¯â„°â„±â„²â„³â„´â„µâ„¶â„·â„¸â…â…‚â…ƒâ…„â……â…†â…‡â…ˆâ…‰â…‹â…Žâ…â…‘â…’â…“â…”â…•â…–â…—â…˜â…™â…šâ…›â…œâ…â…žâ…Ÿâ… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«â…¬â…­â…®â…¯â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸â…¹â…ºâ…»â…¼â…½â…¾â…¿â†„â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â†šâ†›â†œâ†â†žâ†Ÿâ† â†¡â†¢â†£â†¤â†¥â†¦â†§â†¨â†©â†ªâ†«â†¬â†­â†®â†¯â†°â†±â†²â†³â†´â†µâ†¶â†·â†¸â†¹â†ºâ†»â†¼â†½â†¾â†¿â‡€â‡â‡‚â‡ƒâ‡„â‡…â‡†â‡‡â‡ˆâ‡‰â‡Šâ‡‹â‡Œâ‡â‡Žâ‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡šâ‡›â‡œâ‡â‡žâ‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡¨â‡©â‡ªâ‡«â‡¬â‡­â‡®â‡¯â‡°â‡±â‡²â‡³â‡´â‡µâ‡¶â‡·â‡¸â‡¹â‡ºâ‡»â‡¼â‡½â‡¾â‡¿âˆ€âˆâˆ‚âˆƒâˆ„âˆ…âˆ†âˆ‡âˆˆâˆ‰âˆŠâˆ‹âˆŒâˆâˆŽâˆâˆâˆ‘âˆ’âˆ“âˆ”âˆ•âˆ–âˆ—âˆ˜âˆ™âˆšâˆ›âˆœâˆâˆžâˆŸâˆ âˆ¡âˆ¢âˆ£âˆ¤âˆ¥âˆ¦âˆ§âˆ¨âˆ©âˆªâˆ«âˆ¬âˆ­âˆ®âˆ¯âˆ°âˆ±âˆ²âˆ³âˆ´âˆµâˆ¶âˆ·âˆ¸âˆ¹âˆºâˆ»âˆ¼âˆ½âˆ¾âˆ¿â‰€â‰â‰‚â‰ƒâ‰„â‰…â‰†â‰‡â‰ˆâ‰‰â‰Šâ‰‹â‰Œâ‰â‰Žâ‰â‰â‰‘â‰’â‰“â‰”â‰•â‰–â‰—â‰˜â‰™â‰šâ‰›â‰œâ‰â‰žâ‰Ÿâ‰ â‰¡â‰¢â‰£â‰¤â‰¥â‰¦â‰§â‰¨â‰©â‰ªâ‰«â‰¬â‰­â‰®â‰¯â‰°â‰±â‰²â‰³â‰´â‰µâ‰¶â‰·â‰¸â‰¹â‰ºâ‰»â‰¼â‰½â‰¾â‰¿âŠ€âŠâŠ‚âŠƒâŠ„âŠ…âŠ†âŠ‡âŠˆâŠ‰âŠŠâŠ‹âŠŒâŠâŠŽâŠâŠâŠ‘âŠ’âŠ“âŠ”âŠ•âŠ–âŠ—âŠ˜âŠ™âŠšâŠ›âŠœâŠâŠžâŠŸâŠ âŠ¡âŠ¢âŠ£âŠ¤âŠ¥âŠ¦âŠ§âŠ¨âŠ©âŠªâŠ«âŠ¬âŠ­âŠ®âŠ¯âŠ°âŠ±âŠ²âŠ³âŠ´âŠµâŠ¶âŠ·âŠ¸âŠ¹âŠºâŠ»âŠ¼âŠ½âŠ¾âŠ¿â‹€â‹â‹‚â‹ƒâ‹„â‹…â‹†â‹‡â‹ˆâ‹‰â‹Šâ‹‹â‹Œâ‹â‹Žâ‹â‹â‹‘â‹’â‹“â‹”â‹•â‹–â‹—â‹˜â‹™â‹šâ‹›â‹œâ‹â‹žâ‹Ÿâ‹ â‹¡â‹¢â‹£â‹¤â‹¥â‹¦â‹§â‹¨â‹©â‹ªâ‹«â‹¬â‹­â‹®â‹¯â‹°â‹±âŒ€âŒâŒ‚âŒƒâŒ„âŒ…âŒ†âŒ‡âŒˆâŒ‰âŒŠâŒ‹âŒâŒ‘âŒ’âŒ“âŒ”âŒ•âŒ–âŒ—âŒ˜âŒ™âŒ âŒ¡âŒ¢âŒ£âŒ¤âŒ¥âŒ¦âŒ§âŒ¨âŒ«âŒ¬âŽ›âŽœâŽâŽžâŽŸâŽ âŽ¡âŽ¢âŽ£âŽ¤âŽ¥âŽ¦âŽ§âŽ¨âŽ©âŽªâŽ«âŽ¬âŽ­âŽââšâ›â±â²â¢â£â”€â”â”‚â”ƒâ”„â”…â”†â”‡â”ˆâ”‰â”Šâ”‹â”Œâ”â”Žâ”â”â”‘â”’â”“â””â”•â”–â”—â”˜â”™â”šâ”›â”œâ”â”žâ”Ÿâ” â”¡â”¢â”£â”¤â”¥â”¦â”§â”¨â”©â”ªâ”«â”¬â”­â”®â”¯â”°â”±â”²â”³â”´â”µâ”¶â”·â”¸â”¹â”ºâ”»â”¼â”½â”¾â”¿â•€â•â•‚â•ƒâ•„â•…â•†â•‡â•ˆâ•‰â•Šâ•‹â•Œâ•â•Žâ•â•â•‘â•’â•“â•”â••â•–â•—â•˜â•™â•šâ•›â•œâ•â•žâ•Ÿâ• â•¡â•¢â•£â•¤â•¥â•¦â•§â•¨â•©â•ªâ•«â•¬â•­â•®â•¯â•°â•±â•²â•³â•´â•µâ•¶â•·â•¸â•¹â•ºâ•»â•¼â•½â•¾â•¿â–€â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‰â–Šâ–‹â–Œâ–â–Žâ–â–â–‘â–’â–“â–”â–•â––â–—â–˜â–™â–šâ–›â–œâ–â–žâ–Ÿâ– â–¡â–¢â–£â–¤â–¥â–¦â–§â–¨â–©â–ªâ–«â–¬â–­â–®â–¯â–°â–±â–²â–³â–´â–µâ–¶â–·â–¸â–¹â–ºâ–»â–¼â–½â–¾â–¿â—€â—â—‚â—ƒâ—„â—…â—†â—‡â—ˆâ—‰â—Šâ—‹â—Œâ—â—Žâ—â—â—‘â—’â—“â—”â—•â—–â——â—˜â—™â—šâ—›â—œâ—â—žâ—Ÿâ— â—¡â—¢â—£â—¤â—¥â—¦â—§â—¨â—©â—ªâ—«â—¬â—­â—®â—¯â—°â—±â—²â—³â—´â—µâ—¶â—·â—¸â—¹â—ºâ—»â—¼â—¿â˜€â˜â˜‚â˜ƒâ˜„â˜…â˜†â˜‡â˜ˆâ˜‰â˜Šâ˜‹â˜Œâ˜â˜Žâ˜â˜â˜‘â˜’â˜“â˜–â˜—â˜˜â˜™â˜šâ˜›â˜œâ˜â˜žâ˜Ÿâ˜ â˜¡â˜¢â˜£â˜¤â˜¥â˜¦â˜§â˜¨â˜©â˜ªâ˜«â˜¬â˜­â˜®â˜¯â˜°â˜±â˜²â˜³â˜´â˜µâ˜¶â˜·â˜¸â˜¹â˜ºâ˜»â˜¼â˜½â˜¾â˜¿â™€â™â™‚â™ƒâ™„â™…â™†â™‡â™”â™•â™–â™—â™˜â™™â™šâ™›â™œâ™â™žâ™Ÿâ™ â™¡â™¢â™£â™¤â™¥â™¦â™§â™¨â™©â™ªâ™«â™¬â™­â™®â™¯â™²â™³â™´â™µâ™¶â™·â™¸â™¹â™ºâ™»â™¼â™½â™¾âš€âšâš‚âšƒâš„âš…âšâš‘âš’âš”âš•âš–âš—âš˜âš™âššâš›âšœâšâšžâšŸâš âš¢âš£âš¤âš¥âš¦âš§âš¨âš©âš¬âš­âš®âš¯âš°âš±âš²âš³âš´âšµâš¶âš·âš¸âš¹âšºâš»âš¼â›€â›â›‚â›ƒâ›¢â›¤â›¥â›¦â›§â›¨â›©â›«â›¬â›­â›®â›¯â›°â›±â›´â›¶â›·â›¸â›¹â›»â›¼â›¾â›¿âœâœ‚âœƒâœ„âœ†âœ‡âœˆâœ‰âœŒâœâœŽâœâœâœ‘âœ’âœ“âœ”âœ•âœ–âœ—âœ˜âœ™âœšâœ›âœœâœâœžâœŸâœ âœ¡âœ¢âœ£âœ¤âœ¥âœ¦âœ§âœ©âœªâœ«âœ¬âœ­âœ®âœ¯âœ°âœ±âœ²âœ³âœ´âœµâœ¶âœ·âœ¸âœ¹âœºâœ»âœ¼âœ½âœ¾âœ¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹ââââ‘â’â–â˜â™âšâ›âœââžâŸâ â¡â¢â£â¤â¥â¦â§âž”âž˜âž™âžšâž›âžœâžâžžâžŸâž âž¡âž¢âž£âž¤âž¥âž¦âž§âž¨âž©âžªâž«âž¬âž­âž®âž¯âž±âž²âž³âž´âžµâž¶âž·âž¸âž¹âžºâž»âž¼âž½âž¾âŸ°âŸ±âŸ²âŸ³âŸ´âŸµâŸ¶âŸ·âŸ¸âŸ¹âŸºâŸ»âŸ¼âŸ½âŸ¾âŸ¿â¤€â¤â¤‚â¤ƒâ¤„â¤…â¤†â¤‡â¤ˆâ¤‰â¤Šâ¤‹â¤Œâ¤â¤Žâ¤â¤â¤‘â¤’â¤“â¤”â¤•â¤–â¤—â¤˜â¤™â¤šâ¤›â¤œâ¤â¤žâ¤Ÿâ¤ â¤¡â¤¢â¤£â¤¤â¤¥â¤¦â¤§â¤¨â¤©â¤ªâ¤«â¤¬â¤­â¤®â¤¯â¤°â¤±â¤²â¤³â¤´â¤µâ¤¶â¤·â¤¸â¤¹â¤ºâ¤»â¤¼â¤½â¤¾â¤¿â¥€â¥â¥‚â¥ƒâ¥„â¥…â¥†â¥‡â¥ˆâ¥‰â¥Šâ¥‹â¥Œâ¥â¥Žâ¥â¥â¥‘â¬€â¬â¬‚â¬ƒâ¬„â¬…â¬†â¬‡â¬ˆâ¬‰â¬Šâ¬‹â¬Œâ¬â¬Žâ¬â¬â¬‘â¬’â¬“â¬”â¬•â¬–â¬—â¬˜â¬™â¬šâ± â±¡â±£â±¥â±¦â±­â±¯â±°â¸¢â¸£â¸¤â¸¥â¸®ã€ƒã€„ï¬€ï¬ï¬‚ï¬ƒï¬„ï¬…ï¬†ï´¾ï´¿ï·¼ï¸ï¸‘ï¸’ï¸“ï¸”ï¸•ï¸–ï¸—ï¸˜ï¸™ï¸°ï¸±ï¸²ï¸³ï¸´ï¸µï¸¶ï¸·ï¸¸ï¸¹ï¸ºï¸»ï¸¼ï¸½ï¸¾ï¸¿ï¹€ï¹ï¹‚ï¹ƒï¹„ï¹…ï¹†ï¹‰ï¹Šï¹‹ï¹Œï¹ï¹Žï¹ï¹ï¹‘ï¹’ï¹”ï¹•ï¹–ï¹—ï¹˜ï¹™ï¹šï¹›ï¹œï¹ï¹žï¹Ÿï¹ ï¹¡ï¹¢ï¹£ï¹¤ï¹¥ï¹¦ï¹¨ ï¹©ï¹ªï¹«\ufeffï¼ï¼‚ï¼ƒï¼„ï¼…ï¼†ï¼‡ï¼ˆï¼‰ï¼Šï¼‹ï¼Œï¼ï¼Žï¼ï¼ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™ï¼šï¼›ï¼œï¼ï¼žï¼Ÿï¼ ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼ºï¼»ï¼¼ï¼½ï¼¾ï¼¿ï½€ï½ï½‚ï½ƒï½„ï½…ï½†ï½‡ï½ˆï½‰ï½Šï½‹ï½Œï½ï½Žï½ï½ï½‘ï½’ï½“ï½”ï½•ï½–ï½—ï½˜ï½™ï½šï½›ï½œï½ï½žï½Ÿï½ ï¿ ï¿¡ï¿¢ï¿£ï¿¤ï¿¥ï¿¦ï¿¼ï¿½"
    priorities = {}
    for i, character in enumerate(common_emoji):
        priorities[character] = 100-i//(len(common_emoji)/100)
    for i, character in enumerate(common_characters):
        priorities[character] = 100-i//(len(common_characters)/100)
    return priorities
